<div tal:omit-tag="" tal:define=" items subitem['items'];
                                  itemslen len(items)|0">

    <div class="panel panel-default"
         tal:condition="items and itemslen == 1">
         <div class="panel-heading">${subitem['view'].title}</div>
         <div tal:define="item items[0]" class="panel-body">

            <div  tal:condition="'messages' in item" id="messages" class="ajax-replace">
              <div tal:define="allmessages item['messages']" tal:repeat="queue allmessages.keys()" tal:omit-tag="">
                <div class="alert alert-${queue or 'info'}"
                     tal:define="messagesr allmessages[queue]"
                     tal:condition="messagesr"
                     tal:repeat="message messagesr">
                  <button type="button" class="close" data-dismiss="alert">&times;</button>
                  ${structure:message}
                </div>
              </div>
            </div>

             <div tal:replace="subitem['view'].render_item(item, slot)" />
         </div> 
    </div>
    <div tal:omit-tag="" tal:condition="items and itemslen > 1">
      <ul tal:attributes="id (subitem['view'].viewid+'_multipleform_'+slot)" class="nav nav-tabs">
          <li tal:repeat="item items" tal:attributes="class item['isactive'] and 'active' or ''"><a data-toggle="tab" tal:attributes="href '#'+item['id']+slot">${item['view'].title}</a></li>
      </ul>
     <div tal:attributes="id (subitem['id']+'_multipleform'+slot)" class="tab-content">
          <div tal:repeat="item items" tal:attributes="id item['id']+slot; class 'tab-pane fade'+(item['isactive'] and ' in active' or '')">

            <div tal:condition="'messages' in item" id="messages" class="ajax-replace">
              <div tal:define="allmessages item['messages']" tal:repeat="queue allmessages.keys()" tal:omit-tag="">
                <div class="alert alert-${queue or 'info'}"
                     tal:define="messagesr allmessages[queue]"
                     tal:condition="messagesr"
                     tal:repeat="message messagesr">
                  <button type="button" class="close" data-dismiss="alert">&times;</button>
                  ${structure:message}
                </div>
              </div>
            </div>

              <div tal:replace="subitem['view'].render_item(item, slot)" />         
          </div>
      </div>
    </div>
   </div>

